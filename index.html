<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>User Checker</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="./styles.css">
</head>
<body>
  <div class="app">
    <header class="topbar">
      <div class="title">
        <div class="logo"></div>
        <div>
          <h1>User Checker</h1>
          <div class="subtitle">Check players, report cheaters & bad behavior</div>
        </div>
      </div>
    </header>

    <!-- Actions -->
    <section class="card" id="actionsCard">
      <div class="card-header">
  <h2>Actions</h2>
</div>

      <div class="action-row">
        <button class="btn btn-ghost" id="checkBtn">Check user</button>
        <button class="btn btn-danger" id="reportBtn">Report user</button>
        <button class="btn btn-primary" id="listBtn">List of pidars</button>
      </div>
    </section>

    <!-- Check -->
    <section class="card hidden" id="checkCard">
      <div class="card-header">
        <h2>Check user</h2>
        <span class="pill">UID or nickname</span>
      </div>

      <div class="field">
        <label for="checkQuery">Search</label>
        <input id="checkQuery" placeholder="Enter UID or nickname"/>
      </div>

      <button class="btn btn-primary" id="doCheckBtn">Find</button>

      <div class="msg" id="checkResult"></div>
      <div id="reportsBlock" class="reports hidden"></div>

      <button class="btn btn-ghost" id="backFromCheck">Back</button>
    </section>

    <!-- Report -->
    <section class="card hidden" id="reportCard">
      <div class="card-header">
        <h2>Report user</h2>
        <span class="pill">required fields</span>
      </div>

      <!-- UID with OCR -->
      <div class="field">
        <label for="reportUid">Reported UID (optional)</label>
        <input id="reportUid" placeholder="Enter UID if known"/>
        <div class="inline">
          <input type="file" id="uidShot" accept="image/*" class="file"/>
          <button class="btn btn-ghost btn-small" id="readUidBtn">Read UID from screenshot</button>
        </div>
        <div class="ocr hidden" id="uidOcrBox">
          <img id="uidPreview" class="preview" />
          <div class="ocr-row">
            <div>
              <div class="ocr-label">Extracted UID</div>
              <div class="ocr-value" id="uidExtracted">—</div>
            </div>
            <button class="btn btn-primary btn-small" id="useUidBtn">Use extracted</button>
          </div>
          <details>
            <summary>OCR text</summary>
            <pre id="uidRawText"></pre>
          </details>
        </div>
      </div>

      <!-- Nickname with OCR -->
      <div class="field">
        <label for="reportNick">Reported nickname (optional)</label>
        <input id="reportNick" placeholder="Enter nickname if known"/>
        <div class="hint">You must fill at least UID or nickname.</div>

        <div class="inline">
          <input type="file" id="nickShot" accept="image/*" class="file"/>
          <button class="btn btn-ghost btn-small" id="readNickBtn">Read nickname from screenshot</button>
        </div>
        <div class="ocr hidden" id="nickOcrBox">
          <img id="nickPreview" class="preview" />
          <div class="ocr-row">
            <div>
              <div class="ocr-label">Extracted nickname</div>
              <div class="ocr-value" id="nickExtracted">—</div>
            </div>
            <button class="btn btn-primary btn-small" id="useNickBtn">Use extracted</button>
          </div>
          <details>
            <summary>OCR text</summary>
            <pre id="nickRawText"></pre>
          </details>
        </div>
      </div>

      <!-- Dropdowns -->
      <div class="grid-2">
        <div class="field">
          <label for="reportMap">Map (required)</label>
          <select id="reportMap">
            <option value="">Select map…</option>
            <option>Zero Dam</option>
            <option>Zero Dam (Night mode)</option>
            <option>Zero Dam (Easy)</option>
            <option>Brakkesh</option>
            <option>Layali Grove (Easy)</option>
            <option>Layali Grove (Normal)</option>
            <option>Space City (Normal)</option>
            <option>Space City (Hard)</option>
            <option>Tide Prison</option>
          </select>
        </div>

        <div class="field">
          <label for="reportChar">Character (optional)</label>
          <select id="reportChar">
            <option value="">Select character…</option>
            <option>Luna</option>
            <option>Hackclaw</option>
            <option>Gizmo</option>
            <option>D-Wolf</option>
            <option>Nox</option>
            <option>Vyron</option>
            <option>Tempest</option>
            <option>Uluru</option>
            <option>Shepherd</option>
            <option>Stinger</option>
            <option>Sineva</option>
            <option>Toxic</option>
          </select>
        </div>
      </div>

      <!-- Reason type -->
      <div class="field">
        <label for="reportReason">Reason type (required)</label>
        <select id="reportReason">
          <option value="">Select reason…</option>
          <option value="cheater">Cheater</option>
          <option value="huesos">Huesos (bad behavior)</option>
        </select>
      </div>

      <!-- Notes -->
      <div class="field">
        <label for="reportNotes">Notes (required)</label>
        <textarea id="reportNotes" rows="1" placeholder="Extra details / what happened"></textarea>
        <div class="hint">Auto-expands as you type.</div>
      </div>

      <button class="btn btn-danger" id="doReportBtn">Submit report</button>
      <div class="msg" id="reportMsg"></div>

      <button class="btn btn-ghost" id="backFromReport">Back</button>
    </section>

    <!-- LIST -->
    <section class="card hidden" id="listCard">
      <div class="card-header">
        <h2>List of pidars</h2>
        <span class="pill" id="listCount">0 entries</span>
      </div>

      <div class="list-controls">
        <div class="field">
          <label for="sortSelect">Sort by</label>
          <select id="sortSelect">
            <option value="date_desc">Date ↓ (newest)</option>
            <option value="date_asc">Date ↑ (oldest)</option>
          </select>
        </div>

        <div class="view-toggle">
          <button class="btn btn-ghost btn-small" id="listViewBtn">List</button>
          <button class="btn btn-ghost btn-small" id="tableViewBtn">Table</button>
        </div>
      </div>

      <div id="listView" class="entries-list"></div>

      <div id="tableView" class="hidden">
        <div class="table-wrap">
          <table class="entries-table">
            <thead>
              <tr>
                <th>Name / UID</th>
                <th>Reason</th>
                <th>Map</th>
                <th>Character</th>
                <th>Notes</th>
                <th>Date</th>
              </tr>
            </thead>
            <tbody id="tableBody"></tbody>
          </table>
        </div>
      </div>

      <div class="msg" id="listMsg"></div>

      <button class="btn btn-ghost" id="backFromList">Back</button>
    </section>
  </div>

  <!-- Tesseract.js for OCR -->
  <script src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"></script>
  <script type="module" src="./app.js?v=6"></script>
</body>
</html>